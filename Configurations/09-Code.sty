%%% Code Highlighting %%%
\newenvironment{code}{\captionsetup{type=listing}}{}
\ifthenelse{\equal{\LanguageOption}{portuguese}}{%
    \SetupFloatingEnvironment{listing}{name=Listagem}
}{%
    \SetupFloatingEnvironment{listing}{name=Listing}
}
\captionsetup[listing]{skip=-7pt}

\newenvironment{longlisting}{\captionsetup{type=listing}}

% Define a new and improved minted style.
\setminted{
    frame=lines,
    framesep=2mm,
    baselinestretch=1.2,
    fontsize=\footnotesize,
    linenos,
    tabsize=4,
    breaklines=true,
    breakanywhere=true
}

% Change line number colour to gray (Frade's suggestion).
\renewcommand{\theFancyVerbLine}{%
    \scriptsize\textcolor[rgb]{0.7,0.7,0.7}{\arabic{FancyVerbLine}}%
}